# OCR MCP æœåŠ¡è¾“å‡ºå¤±è´¥åŸå› åˆ†æ

## ğŸ” é—®é¢˜è¯Šæ–­

æ ¹æ® MCP æ—¥å¿—åˆ†æï¼Œä¸»è¦é—®é¢˜å¦‚ä¸‹ï¼š

### 1. å‘½ä»¤ä¸å­˜åœ¨é”™è¯¯
```
spawn ocr-mcp-server ENOENT
```
**åŸå› **ï¼š`ocr-mcp-server` å‘½ä»¤æœªæ‰¾åˆ°

**æ ¹æœ¬åŸå› **ï¼š
- åŒ…æœªå®‰è£…ï¼š`ocr-mcp-service` åŒ…æ²¡æœ‰é€šè¿‡ `pip install -e .` å®‰è£…
- ç³»ç»Ÿç¯å¢ƒé™åˆ¶ï¼šå½“å‰ç³»ç»Ÿæ˜¯å¤–éƒ¨ç®¡ç†çš„ Python ç¯å¢ƒï¼Œä¸å…è®¸ç›´æ¥å®‰è£…åŒ…

### 2. ä¾èµ–ç¼ºå¤±
```
ModuleNotFoundError: No module named 'fastmcp'
```
**åŸå› **ï¼šé¡¹ç›®ä¾èµ–ï¼ˆ`fastmcp`ï¼‰æœªå®‰è£…

### 3. MCP é…ç½®è·¯å¾„é”™è¯¯
`mcp_config.json` ä¸­ä½¿ç”¨äº† Windows è·¯å¾„ï¼š
```json
"cwd": "C:\\Users\\Q\\Desktop\\Github\\ocr-mcp-service"
```
ä½†å½“å‰ç³»ç»Ÿæ˜¯ Linuxï¼Œè·¯å¾„åº”è¯¥æ˜¯ï¼š
```
/home/qiao/Desktop/github-repos-manager/662.6/ocr-mcp-service
```

## âœ… è§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆ 1ï¼šä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå®‰è£…ï¼ˆæ¨èï¼‰

```bash
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
cd /home/qiao/Desktop/github-repos-manager/662.6/ocr-mcp-service
python3 -m venv venv

# 2. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
source venv/bin/activate

# 3. å®‰è£…åŒ…
pip install -e .

# 4. å®‰è£… OCR å¼•æ“ï¼ˆè‡³å°‘é€‰æ‹©ä¸€ä¸ªï¼‰
pip install -e ".[paddleocr]"  # æ¨èï¼Œä¸­æ–‡ä¼˜ç§€
# æˆ–
pip install -e ".[easyocr]"     # å¤šè¯­è¨€æ”¯æŒ

# 5. éªŒè¯å®‰è£…
which ocr-mcp-server
ocr-mcp-server --help
```

### æ–¹æ¡ˆ 2ï¼šä½¿ç”¨ Python æ¨¡å—æ–¹å¼ï¼ˆæ— éœ€å®‰è£…ï¼‰

ä¿®æ”¹ Cursor MCP é…ç½®ï¼ˆ`~/.cursor/mcp.json`ï¼‰ï¼š

```json
{
  "mcpServers": {
    "ocr-service": {
      "command": "python3",
      "args": [
        "-m",
        "ocr_mcp_service"
      ],
      "cwd": "/home/qiao/Desktop/github-repos-manager/662.6/ocr-mcp-service",
      "env": {
        "PYTHONPATH": "/home/qiao/Desktop/github-repos-manager/662.6/ocr-mcp-service/src"
      }
    }
  }
}
```

**æ³¨æ„**ï¼šä½¿ç”¨æ­¤æ–¹æ¡ˆéœ€è¦å…ˆå®‰è£…ä¾èµ–ï¼š
```bash
# åœ¨é¡¹ç›®ç›®å½•ä¸‹åˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…ä¾èµ–
python3 -m venv venv
source venv/bin/activate
pip install fastmcp pillow
pip install -e ".[paddleocr]"  # æˆ–é€‰æ‹©å…¶ä»–å¼•æ“
```

### æ–¹æ¡ˆ 3ï¼šä½¿ç”¨ pipx å®‰è£…ï¼ˆç³»ç»Ÿçº§ï¼‰

```bash
# å®‰è£… pipxï¼ˆå¦‚æœæœªå®‰è£…ï¼‰
sudo apt install pipx  # Ubuntu/Debian
# æˆ–
brew install pipx      # macOS

# ä½¿ç”¨ pipx å®‰è£…
cd /home/qiao/Desktop/github-repos-manager/662.6/ocr-mcp-service
pipx install -e .

# éªŒè¯
ocr-mcp-server --help
```

## ğŸ”§ é…ç½®æ›´æ–°

### æ›´æ–° MCP é…ç½®è„šæœ¬

`config_manager.py` ä¸­çš„ `get_ocr_service_config()` å‡½æ•°éœ€è¦æ ¹æ®ç¯å¢ƒé€‰æ‹©æ­£ç¡®çš„å‘½ä»¤ï¼š

**å½“å‰é…ç½®**ï¼ˆéœ€è¦åŒ…å·²å®‰è£…ï¼‰ï¼š
```python
{
    "command": "ocr-mcp-server",
    "args": []
}
```

**å¤‡ç”¨é…ç½®**ï¼ˆæ— éœ€å®‰è£…åŒ…ï¼‰ï¼š
```python
{
    "command": "python3",
    "args": ["-m", "ocr_mcp_service"],
    "cwd": "/home/qiao/Desktop/github-repos-manager/662.6/ocr-mcp-service",
    "env": {
        "PYTHONPATH": "/home/qiao/Desktop/github-repos-manager/662.6/ocr-mcp-service/src"
    }
}
```

## ğŸ“‹ éªŒè¯æ­¥éª¤

1. **æ£€æŸ¥å‘½ä»¤æ˜¯å¦å­˜åœ¨**ï¼š
   ```bash
   which ocr-mcp-server
   ```

2. **æ£€æŸ¥æ¨¡å—æ˜¯å¦å¯å¯¼å…¥**ï¼š
   ```bash
   python3 -c "import sys; sys.path.insert(0, 'src'); from ocr_mcp_service.__main__ import main; print('OK')"
   ```

3. **æ£€æŸ¥ MCP é…ç½®**ï¼š
   ```bash
   python3 scripts/check_mcp_config.py
   ```

4. **æµ‹è¯•æœåŠ¡å™¨å¯åŠ¨**ï¼š
   ```bash
   ocr-mcp-server
   # æˆ–
   python3 -m ocr_mcp_service
   ```

## ğŸ¯ æ¨èæ“ä½œæµç¨‹

1. **åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ**ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
2. **å®‰è£…åŒ…å’Œä¾èµ–**
3. **æ›´æ–° Cursor MCP é…ç½®**
4. **é‡å¯ Cursor**
5. **éªŒè¯å·¥å…·æ˜¯å¦å¯ç”¨**

## âš ï¸ æ³¨æ„äº‹é¡¹

- å¦‚æœä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼Œéœ€è¦ç¡®ä¿ Cursor èƒ½å¤Ÿè®¿é—®è™šæ‹Ÿç¯å¢ƒä¸­çš„ Python å’Œå‘½ä»¤
- å¦‚æœä½¿ç”¨ç³»ç»Ÿ Pythonï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ `--break-system-packages` æ ‡å¿—ï¼ˆä¸æ¨èï¼‰
- MCP é…ç½®ä¸­çš„è·¯å¾„å¿…é¡»æ˜¯ç»å¯¹è·¯å¾„
- é…ç½®æ›´æ”¹åéœ€è¦å®Œå…¨é‡å¯ Cursor

